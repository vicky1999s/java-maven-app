pipeline{

    agent {
        label 'linux'
    }

    tools{
        maven 'maven-linux'
    }

    stages{

        stage('BUILD'){
            steps{
                echo "maven home: ${env.MAVEN_HOME}"
                sh 'mvn -DskipTests package'
                echo '=====build completed======='
            }
        }

        stage('TEST'){
            steps{
                sh 'mvn test'
            }
            
            post{
                always{
                    junit skipPublishingChecks: true, testResults: 'target/surefire-reports/*.xml'
                }
            }
        }
    }
}